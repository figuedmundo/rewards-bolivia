POSTGRES_USER=rewardsuser
POSTGRES_PASSWORD=rewardspassword
POSTGRES_DB=rewardsdb
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=http://localhost:3001/api/auth/google/callback
JWT_SECRET=
JWT_REFRESH_SECRET=

# ============================================================================
# Notification Configuration
# ============================================================================
# These environment variables configure the Point Expiration Notification system
# See: docs/api/NOTIFICATION_ENDPOINTS.md for detailed API documentation
# See: packages/api/src/modules/notifications/README.md for implementation details

# Scheduled job for checking expiring points (cron expression)
# Default: "0 9 * * *" (9 AM UTC daily)
# Format: "second minute hour day month weekday"
# Examples:
#   "0 9 * * *"     - Every day at 9 AM UTC
#   "0 2 * * *"     - Every day at 2 AM UTC
#   "0 */4 * * *"   - Every 4 hours
# IMPORTANT: Changing the schedule requires restarting the application
NOTIFICATION_CRON_SCHEDULE="0 9 * * *"

# Batch size for processing notifications
# Default: 100
# Controls how many users are processed in a single batch to avoid memory issues
# Recommended range: 50-500 depending on available memory
# Larger batches = faster processing but higher memory usage
NOTIFICATION_BATCH_SIZE=100

# Rate limit for email sending (emails per second)
# Default: 14 (AWS SES production quota)
# In AWS SES sandbox mode: 1 (only verified emails)
# In AWS SES production mode: 14-50 (depending on sending quota)
# IMPORTANT: Must match or be lower than your AWS SES sending quota
# Check your SES quota in AWS Console: SES > Sending Limits
NOTIFICATION_RATE_LIMIT=14

# ============================================================================
# AWS SES Configuration
# ============================================================================
# AWS SES (Simple Email Service) is used for sending transactional emails
# See: https://docs.aws.amazon.com/ses/ for AWS SES documentation

# AWS Region where SES is enabled
# Default: us-east-1
# Supported regions: us-east-1, us-west-2, eu-west-1, ap-southeast-1, etc.
# Note: SES may not be available in all regions - check AWS docs
AWS_SES_REGION=us-east-1

# AWS IAM access key ID for programmatic access
# REQUIRED for production - get from AWS Console: IAM > Users > Security Credentials
# SECURITY WARNING: Never commit credentials to version control
# Use secure credential management (AWS Secrets Manager, parameter store, etc.)
# Recommended: Use IAM user with SES-only permissions (ses:SendEmail, ses:SendRawEmail)
AWS_ACCESS_KEY_ID=

# AWS IAM secret access key
# REQUIRED for production - get from AWS Console
# SECURITY WARNING: Never commit credentials to version control
# SECURITY WARNING: Never share this key or include in logs
# Keep this value absolutely secret and rotate regularly (90-day rotations recommended)
AWS_SECRET_ACCESS_KEY=

# Email address to send notifications from
# MUST be verified in AWS SES (see: SES Console > Verified identities)
# Format: email@your-verified-domain.com
# Examples:
#   notifications@rewards-bolivia.com
#   noreply@rewards-bolivia.com
#   alerts@rewards-bolivia.com
# Note: Domain must be verified for production (sandbox mode can only send to verified recipients)
AWS_SES_FROM_EMAIL=notifications@rewards-bolivia.com

# ============================================================================
# Frontend Configuration
# ============================================================================
# URL for the wallet dashboard link in notification emails

# Frontend Wallet URL (used in notification emails for "View Your Wallet" CTA)
# Default: http://localhost:5173/wallet
# Development: http://localhost:5173/wallet
# Staging: https://staging.rewards-bolivia.com/wallet
# Production: https://app.rewards-bolivia.com/wallet
# IMPORTANT: This URL must be accessible to users who receive the email
# Ensures deep linking works correctly in email clients
FRONTEND_WALLET_URL=http://localhost:5173/wallet

# ============================================================================
# Database Configuration
# ============================================================================
# Database connection settings (created by migrations)
# The following tables are used by the notification system:
#   - NotificationLog: Tracks all notification attempts (SENT/FAILED/SKIPPED)
#   - User: Extended with emailNotifications boolean field
#   - PointLedger: Contains expiresAt field for point expiration dates

# Internal note: Database indexes optimize common queries:
#   - NotificationLog: (userId, notificationType, expirationDate) for deduplication
#   - PointLedger: (expiresAt, credit) and (accountId, expiresAt) for efficient expiration queries
